1. База.
Сказано абстрагироваться от базы, но, селекты зашиты в код. 
Не знаю, сделано это для примера, или это часть задачи. 
У доктрины есть свой queryBuilder, но в задаче мы абстрагируемся от него. Потому написал свой примитив для селекта

2. Контроллеры:\
2.1. Респонс везде идёт по одной схеме с одинаковыми заголовками. Вынес в трейт. Убрал почти дублирующийся код.\
2.2. Получение RawRequest слишком многословно. Вынес в абстрактный класс.\
Почему в одном случае трейт, в другом наследование?\
Получение реквеста - общий метод с которым, вероятно, будет работать большинство контроллеров.\
А вот респонс - он может быть и в html. И метод jsonResponse там не нужен.\
Чтобы понять, как правильно - нужно больше контекста.\
2.3. GetCartController. В случае успеха не возвращал response. Добавил возврат.

3. Класс ProductsView помимо форматирования массива ещё и сам получает продукты по категории, 
чего ему делать нельзя. Не его ответственность. Убрал.

4. Вынес добавление товара в корзину в CartService. 
Спорный вопрос, добавлять ли получение товаров/корзины так же в сервис. 
Я считаю излишеством, но некоторые команды делают так, и контроллер работает ТОЛЬКО через сервисы

5. Вынес время жизни кэша в конфиг. 
Не знаю, как устроен конфиг на проекте, поэтому сделал "в лоб" - отдельный класс с константами.
Логично, что ConnectorFactory автоматом получает данные из конфига, там не выносил, разумеется.

6. Добавил индекс для категории.

Ещё стоит вынести категории отдельным полем, но это сильно выходит за рамки задачи и текущего кода.
